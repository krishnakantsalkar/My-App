<!-- <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Page Title</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body> -->
<div class="container">
  <p-toast key="clipboard" position="top-right" class="custom-toast"></p-toast>
</div>

<div
  class="notes"
  [ngStyle]="{
    'background-color': brightness ? 'white' : ' rgb(41, 42, 45)',
    color: brightness ? 'black' : 'rgb(129,129,129)'
  }"
>
  <div class="container">
    <button
      *ngIf="!noteSwitch"
      pButton
      type="button"
      class="p-button-raised float-right"
      label="Add Note"
      [ngStyle]="{
        'background-color': brightness ? 'orangered' : ' violet'
      }"
      (click)="showAddNote()"
    ></button>
    <br />
    <br />
    <div *ngIf="noteSwitch" style="margin-bottom: 70px">
      <input
        type="text"
        class="form-control"
        style="width: 100%"
        [(ngModel)]="noteTitle"
        placeholder="title"
      />
      <!-- [readonly]="note.readonly" -->
      <textarea
        cols="30"
        rows="7"
        class="form-control"
        [(ngModel)]="noteContent"
        style="width: 100%; margin: 10px auto"
        placeholder="content"
      ></textarea>
      <div class="btn-group" style="float: right">
        <button
          type="button"
          class="btn"
          (click)="showAddNote()"
          style="background-color: rgb(233, 233, 233); color: black"
        >
          Cancel
        </button>
        <button
          type="button"
          class="btn ml-3"
          [ngStyle]="{
            'background-color': brightness ? 'orangered' : ' violet'
          }"
          style="color: white"
          (click)="saveNote()"
        >
          Save Note
          <span
            id="uploadSpinner"
            class="spinner-border spinner-border-sm"
          ></span>
          <span id="uploadCheck"> <i class="fas fa-check-circle"></i></span>
          <span id="uploadCheckErr"> <i class="fas fa-times-circle"></i></span>
        </button>
      </div>
    </div>

    <hr *ngIf="noteSwitch" />

    <!-- Skeleton Loading animation -->

    <div
      class="card cardPlaceholder"
      [ngStyle]="{
        'background-color': brightness
          ? 'rgb(245, 245, 245)'
          : ' rgb(31, 32, 35)',
        color: brightness ? 'black' : 'rgb(129,129,129)'
      }"
      style="margin-top: 20px; height: 250px; width: 100%"
      *ngIf="!noteSwitch"
    >
      <i class="fas fa-pencil-alt text-muted"></i>
    </div>

    <div
      class="skeletonData"
      style="margin-top: 20px"
      [ngStyle]="{
        'background-color': brightness ? '#dc3545' : ' rgb(32, 33, 33)',
        color: brightness ? 'black' : 'rgb(160,160,160)'
      }"
    >
      <p-skeleton *ngIf="!notesData" width="100%" height="400px"></p-skeleton>
    </div>
    <div
      *ngIf="notesData && notesData.length > 0"
      class="card"
      [ngStyle]="{
        'background-color': brightness
          ? 'rgb(245, 245, 245)'
          : ' rgb(31, 32, 35)',
        color: brightness ? 'black' : 'rgb(129,129,129)'
      }"
      style="margin-top: 20px"
    >
      <div class="card-body">
        <!-- <div class="row w-100" *ngFor="let note of notesData">
              <div class="col-4">
                <p-card
                  [ngStyle]="{
                    'background-color': brightness
                      ? 'rgb(245, 245, 245)'
                      : ' rgb(31, 32, 35)',
                    color: brightness ? 'black' : 'rgb(129,129,129)'
                  }"
                >
                  <ng-template pTemplate="header">
                    {{ note.notes_title }}
                  </ng-template>
                  {{ note.notes_message }}
                  <ng-template pTemplate="footer">
                    <span class="float-left"> {{ note.createdAt }}</span>
                  </ng-template>
                </p-card>
              </div>
            </div> -->
        <div class="row">
          <div
            class="col-sm-6 col-lg-6"
            *ngFor="let note of notesData; let i = index"
            [hidden]="!note.pinned"
          >
            <div
              class="row pinnedNotes"
              *ngIf="note.readonly && note.pinned && !note.archived"
            >
              <div class="col-10">
                <div
                  class="card mb-5"
                  [ngStyle]="{
                    'background-color': brightness
                      ? 'rgb(245, 245, 245)'
                      : ' rgb(41, 42, 45)',
                    color: brightness ? 'black' : 'rgb(129,129,129)'
                  }"
                >
                  <div class="card-header">
                    <h5>
                      {{ note.notes_title }}
                      <span style="float: right"
                        ><i
                          class="fas fa-thumbtack"
                          [ngStyle]="{
                            color: brightness ? 'orangered' : 'violet'
                          }"
                          (click)="pinNote(i, 'unpin')"
                        ></i
                      ></span>
                    </h5>
                  </div>
                  <div class="card-body">
                    <pre
                      [ngStyle]="{
                        color: brightness ? 'black' : 'rgb(129,129,129)'
                      }"
                      >{{ note.notes_message }}</pre
                    >
                  </div>
                  <div class="card-footer">
                    <h5 class="text-muted">
                      <span>
                        {{ note.createdAt | date: "dd MMM | hh:mm" }}</span
                      >
                      <span
                        *ngIf="note.createdAt != note.updatedAt"
                        style="float: right"
                      >
                        last edited <i class="fas fa-pencil-alt"></i>
                        {{ note.updatedAt | date: "dd MMM | hh:mm" }}</span
                      >
                    </h5>
                  </div>
                </div>
              </div>
              <div class="col-2" style="padding-top: 15px">
                <h4 style="font-size: 13px">
                  <i
                    class="fas fa-edit"
                    (click)="clickEditNote(i)"
                    pTooltip="edit note"
                  ></i>
                </h4>
                <h4 *ngIf="note.readonly == false" style="font-size: 13px">
                  <i
                    class="fas fa-times-circle"
                    (click)="cancelEditNote(i)"
                  ></i>
                </h4>
                <h4 style="font-size: 13px">
                  <i
                    class="fas fa-trash-alt"
                    (click)="deleteNote(i)"
                    pTooltip="delete note"
                  ></i>
                </h4>
                <h4 style="font-size: 13px">
                  <i
                    class="fas fa-archive"
                    [ngStyle]="{
                      color: brightness ? 'orangered' : 'violet'
                    }"
                    (click)="archive(i, 'archive')"
                    pTooltip="archive note"
                  ></i>
                </h4>
              </div>
            </div>
            <div
              class="editNotes"
              *ngIf="!note.readonly && note.pinned && !note.archived"
            >
              <div class="row" style="margin-bottom: 20px">
                <div class="col-10">
                  <input
                    type="text"
                    class="form-control"
                    style="width: 100%"
                    [(ngModel)]="note.notes_title"
                  />
                  <!-- [readonly]="note.readonly" -->

                  <textarea
                    style="width: 100%"
                    class="form-control"
                    cols="30"
                    rows="5"
                    [(ngModel)]="note.notes_message"
                  ></textarea>
                  <!-- [readonly]="note.readonly" -->

                  <h4
                    style="margin-top: 14px; font-size: 13px"
                    class="text-muted"
                  >
                    <span> {{ note.createdAt | date: "dd MMM | hh:mm" }}</span>
                    <span
                      *ngIf="note.createdAt != note.updatedAt"
                      style="float: right"
                    >
                      last edited <i class="fas fa-pencil-alt"></i>
                      {{ note.updatedAt | date: "dd MMM | hh:mm" }}</span
                    >
                  </h4>
                  <div
                    class="btn-group"
                    style="float: right; padding-top: 15px"
                    *ngIf="note.readonly == false"
                  >
                    <button
                      (click)="cancelEditNote(i)"
                      class="my-2 btn btn-danger"
                    >
                      Cancel
                    </button>
                    <button
                      (click)="updateNote(i)"
                      class="my-2 ml-3 btn btn-success"
                      style="color: white"
                      [ngClass]="{ disabled: !note.notes_message }"
                    >
                      Update
                    </button>
                  </div>
                </div>
                <div
                  class="col-2"
                  style="padding-top: 15px; text-align: center"
                >
                  <h4 *ngIf="note.readonly == false" style="font-size: 13px">
                    <i
                      class="fas fa-times-circle"
                      (click)="cancelEditNote(i)"
                    ></i>
                  </h4>
                </div>
              </div>
            </div>
          </div>
          <!-- <hr *ngIf="note.readonly && note.pinned" /> -->
          <div
            class="col-sm-6 col-lg-6"
            *ngFor="let note of notesData; let i = index"
            [hidden]="note.pinned"
          >
            <div class="row allNotes" *ngIf="note.readonly && !note.pinned">
              <div class="col-10">
                <div
                  class="card mb-5"
                  [ngStyle]="{
                    'background-color': brightness
                      ? 'rgb(245, 245, 245)'
                      : ' rgb(41, 42, 45)',
                    color: brightness ? 'black' : 'rgb(129,129,129)'
                  }"
                >
                  <div class="card-header">
                    <h5>
                      {{ note.notes_title }}
                      <span style="float: right"
                        ><i
                          class="fas fa-thumbtack"
                          [ngStyle]="{
                            color: brightness ? 'orangered' : 'violet'
                          }"
                          (click)="pinNote(i, 'pin')"
                        ></i
                      ></span>
                    </h5>
                  </div>
                  <div class="card-body">
                    <pre
                      [ngStyle]="{
                        color: brightness ? 'black' : 'rgb(129,129,129)'
                      }"
                      >{{ note.notes_message }}</pre
                    >
                  </div>
                  <div class="card-footer">
                    <h5 class="text-muted">
                      <span>
                        {{ note.createdAt | date: "dd MMM | hh:mm" }}</span
                      >
                      <span
                        *ngIf="note.createdAt != note.updatedAt"
                        style="float: right"
                      >
                        last edited <i class="fas fa-pencil-alt"></i>
                        {{ note.updatedAt | date: "dd MMM | hh:mm" }}</span
                      >
                    </h5>
                  </div>
                </div>
              </div>
              <div class="col-2" style="padding-top: 15px">
                <h4 style="font-size: 13px">
                  <i
                    class="fas fa-edit"
                    (click)="clickEditNote(i)"
                    pTooltip="edit note"
                  ></i>
                </h4>
                <h4 *ngIf="note.readonly == false" style="font-size: 13px">
                  <i
                    class="fas fa-times-circle"
                    (click)="cancelEditNote(i)"
                  ></i>
                </h4>
                <h4 style="font-size: 13px">
                  <i
                    class="fas fa-trash-alt"
                    (click)="deleteNote(i)"
                    pTooltip="delete note"
                  ></i>
                </h4>
                <h4 style="font-size: 13px">
                  <i
                    class="fas fa-archive"
                    [ngStyle]="{
                      color: brightness ? 'orangered' : 'violet'
                    }"
                    (click)="archive(i, 'archive')"
                    pTooltip="archive note"
                  ></i>
                </h4>
              </div>
            </div>

            <div class="editNotes" *ngIf="!note.readonly && !note.pinned">
              <div class="row w-100" style="margin-bottom: 20px">
                <div class="col-10">
                  <input
                    type="text"
                    class="form-control"
                    style="width: 100%"
                    [(ngModel)]="note.notes_title"
                  />
                  <!-- [readonly]="note.readonly" -->

                  <textarea
                    style="width: 100%"
                    class="form-control"
                    cols="30"
                    rows="5"
                    [(ngModel)]="note.notes_message"
                  ></textarea>
                  <!-- [readonly]="note.readonly" -->

                  <h4
                    style="margin-top: 14px; font-size: 13px"
                    class="text-muted"
                  >
                    <span> {{ note.createdAt | date: "dd MMM | hh:mm" }}</span>
                    <span
                      *ngIf="note.createdAt != note.updatedAt"
                      style="float: right"
                    >
                      last edited <i class="fas fa-pencil-alt"></i>
                      {{ note.updatedAt | date: "dd MMM | hh:mm" }}</span
                    >
                  </h4>
                  <div
                    class="btn-group"
                    style="float: right; padding-top: 15px"
                    *ngIf="note.readonly == false"
                  >
                    <button
                      (click)="cancelEditNote(i)"
                      class="my-2 btn btn-danger"
                    >
                      Cancel
                    </button>
                    <button
                      (click)="updateNote(i)"
                      class="my-2 ml-3 btn btn-success"
                      style="color: white"
                      [ngClass]="{ disabled: !note.notes_message }"
                    >
                      Update
                    </button>
                  </div>
                </div>
                <div
                  class="col-1"
                  style="padding-top: 35px; text-align: center"
                >
                  <h4 *ngIf="note.readonly == false" style="font-size: 13px">
                    <i
                      class="fas fa-times-circle"
                      (click)="cancelEditNote(i)"
                    ></i>
                  </h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- footer area -->

<app-footer></app-footer>
<!-- </body>
</html> -->
